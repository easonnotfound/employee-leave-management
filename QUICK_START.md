# ⚡ 员工请假管理系统 - 快速启动指南

## 🎯 30秒快速测试

### 1. 准备数据库
```bash
# 启动MySQL服务
net start MySQL80   # 或 MySQL 或 mysql

# 初始化数据库
mysql -u root -p < database/schema.sql
```

### 2. 启动系统
```bash
# 方法1：一键启动脚本
start.bat

# 方法2：手动启动
cd backend
npm install
npm run dev
```

### 3. 测试验证
- **后端验证**: 访问 http://localhost:3000/api/health
- **前端访问**: 直接打开 `index.html` 文件
- **测试用户**: 输入 `张伟` 或 `TEC20220`

## 🔧 修复内容总结

### ✅ 已修复的问题：

1. **数据库连接统一**
   - 统一所有组件的MySQL密码为 `123456`
   - 修复 .env 文件BOM字符问题
   - 添加详细的连接日志

2. **数据库表结构完整**
   - 确保使用完整的 `schema.sql` 初始化
   - 包含所有必需的表、视图、触发器
   - 中文枚举值与后端代码匹配

3. **MySQL服务检测优化**
   - 支持 MySQL80、MySQL、mysql 等常见服务名
   - 自动尝试启动服务
   - 详细的错误提示和解决方案

4. **前后端通信优化**
   - 统一API端点配置
   - 增强错误提示和调试信息
   - 实时连接状态检查

### 📋 预置测试数据：

| 姓名 | 工号 | 部门 | 年假余额 |
|------|------|------|----------|
| 张伟 | TEC20220 | 技术部 | 8天 |
| 王强 | TEC20230 | 技术部 | 5天 |
| 李娜 | SAL20210 | 销售部 | 12天 |
| 赵敏 | PRD20220 | 产品部 | 10天 |

## 🚨 常见问题解决

### 问题1：数据库连接失败
```
❌ 错误: ER_ACCESS_DENIED_ERROR
✅ 解决: 检查MySQL密码是否为 123456
```

### 问题2：MySQL服务未启动
```
❌ 错误: ECONNREFUSED
✅ 解决: 运行 test-mysql.bat 检查服务状态
```

### 问题3：前端无法连接后端
```
❌ 错误: fetch failed
✅ 解决: 确保后端运行在 http://localhost:3000
```

### 问题4：端口被占用
```
❌ 错误: EADDRINUSE :::3000
✅ 解决: 关闭占用3000端口的程序
```

## 🎉 系统功能测试

### 员工功能测试：
1. 输入员工姓名验证身份
2. 与AI对话申请请假
3. 查看生成的请假表格
4. 下载PNG/PDF格式

### 管理员功能测试：
1. 切换到管理员模式
2. 查看统计数据
3. 审批请假申请
4. 管理员工信息

## 📞 获取帮助

如果遇到问题：
1. 检查后端控制台日志
2. 查看浏览器开发者工具 Console
3. 运行 `cd backend && npm run check-db`
4. 参考 INSTALL.md 详细说明

---
🎯 **修复完成！** 系统现在应该可以正常运行了。